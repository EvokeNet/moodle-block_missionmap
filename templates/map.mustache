{{!
    @template block_mission_map/map
}}
<div class="map">
    {{#chapters}}
        <!-- Chapter is locked -->
        {{#isLocked}}
            <div id="chapter_{{id}}" class="chapter">
                <div class="locked"></div>
                <div class="chapter_header">
                    <h3>{{name}}</h3>
                    <h3 class="lock_info">{{#str}} chapter_locked, block_mission_map {{/str}}</h3>
                    <h3 data-countdown="{{unlocking_date}}">{{#str}} chapter_countdown, block_mission_map {{/str}}</h3>
                </div>
                <img src="{{img}}" />
                {{#levels}}
                    <a href="#" class="mission" data-toggle="tooltip" data-placement="top" title="{{name}}">
                        <span class="mission-text">
                            {{no}}
                        </span>
                    </a>
                {{/levels}}
            </div>
        {{/isLocked}}

        <!-- Chapter is unlocked -->
        {{^isLocked}}
            <div class="chapter">
                <div class="chapter_header">
                    <h3>{{name}}</h3>
                </div>
                <img src="{{img}}" />
                {{#levels}}
                    {{#isLocked}}
                        <div class="mission" data-toggle="tooltip" data-placement="top" title="{{name}}">
                            <div class="locked"></div>
                            <span class="mission-text">&#x1F512;&#xFE0E;</span>
                        </div>
                    {{/isLocked}}
                    {{^isLocked}}
                        <a href="{{url}}" class="mission" data-toggle="tooltip" data-placement="top" title="{{name}}">
                            <span class="mission-text">
                                {{no}}
                            </span>
                        </a>
                    {{/isLocked}}
                {{/levels}}
            </div>
        {{/isLocked}}

    {{/chapters}}
</div>
{{#js}}
    require(['block_mission_map/randomizer'],
        function(module) {
            module.init();
        }
    );
    require(['block_mission_map/countdown'],
        function(module) {
            module.init();
        }
    );
{{/js}}