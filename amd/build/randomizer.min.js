define("block_mission_map/randomizer",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=()=>{const screen_size=window.screen.width,map_image=document.querySelector("img");screen_size<=600||(map_image.complete?(randomize(),initTooltips()):(map_image.addEventListener("load",(()=>{randomize(),initTooltips()})),map_image.addEventListener("error",(()=>{window.console.log("Error while randomizing missions on the map")}))))};const initTooltips=()=>{const missionElements=document.querySelectorAll('.mission[data-toggle="tooltip"]');missionElements.forEach((element=>{if(!element.hasAttribute("data-tooltip-initialized"))if(element.setAttribute("data-tooltip-initialized","true"),"undefined"!=typeof bootstrap&&bootstrap.Tooltip)try{new bootstrap.Tooltip(element,{placement:"top",trigger:"hover",delay:{show:300,hide:100},html:!0,sanitize:!1});console.log("Bootstrap 5 tooltip initialized")}catch(e){console.log("Bootstrap 5 tooltip failed:",e),initCustomTooltip(element)}else if("undefined"!=typeof $&&$.fn.tooltip)try{$(element).tooltip({placement:"top",trigger:"hover",delay:{show:300,hide:100},html:!0}),console.log("jQuery tooltip initialized")}catch(e){console.log("jQuery tooltip failed:",e),initCustomTooltip(element)}else initCustomTooltip(element)})),console.log("Tooltip initialization completed for",missionElements.length,"elements")},initCustomTooltip=element=>{const title=element.getAttribute("title");if(!title)return;element.removeAttribute("title");const tooltip=document.createElement("div");let showTimeout,hideTimeout;tooltip.className="mission-tooltip",tooltip.innerHTML=title,tooltip.style.cssText="\n        position: absolute;\n        background: #333;\n        color: white;\n        padding: 8px 12px;\n        border-radius: 4px;\n        font-size: 12px;\n        z-index: 1000;\n        pointer-events: none;\n        opacity: 0;\n        transition: opacity 0.3s ease;\n        max-width: 200px;\n        word-wrap: break-word;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n    ",document.body.appendChild(tooltip),element.addEventListener("mouseenter",(()=>{clearTimeout(hideTimeout),showTimeout=setTimeout((()=>{const rect=element.getBoundingClientRect();tooltip.style.opacity="1",tooltip.style.visibility="hidden";const centerX=rect.left+rect.width/2,tooltipX=centerX-tooltip.offsetWidth/2,tooltipY=rect.top-tooltip.offsetHeight-2;tooltip.style.left=tooltipX+"px",tooltip.style.top=tooltipY+"px",tooltip.style.visibility="visible",console.log("Tooltip positioned at:",tooltip.style.left,tooltip.style.top),console.log("Mission dot at:",rect.left,rect.top),console.log("Mission center X:",centerX),console.log("Tooltip width:",tooltip.offsetWidth),console.log("Tooltip height:",tooltip.offsetHeight),console.log("Gap between tooltip and mission:",rect.top-tooltipY-tooltip.offsetHeight)}),300)})),element.addEventListener("mouseleave",(()=>{clearTimeout(showTimeout),hideTimeout=setTimeout((()=>{tooltip.style.opacity="0"}),100)})),console.log("Custom tooltip initialized for:",title)},randomize=()=>{const chapters=document.querySelectorAll(".chapter"),seed=xmur3("avocadotoast"),rand=sfc32(seed(),seed(),seed(),seed());for(let i=0;i<chapters.length;i++){let chapter_width=chapters[i].offsetWidth,chapter_height=chapters[i].offsetHeight,missions=chapters[i].querySelectorAll(".mission"),perc_division=chapter_width/missions.length/chapter_width,offsetLeft=.05;for(let j=0;j<missions.length;j++){let height_discount=missions[j].offsetHeight/chapter_height,posx=100*offsetLeft;var posy=(rand()*(1-height_discount)*100).toFixed();missions[j].style.left="".concat(posx,"%"),missions[j].style.top="".concat(posy,"%"),missions[j].style.transform="translate(-".concat(posx,"%, -").concat(posy,"%)"),offsetLeft+=perc_division}}},xmur3=str=>{for(var i=0,h=1779033703^str.length;i<str.length;i++)h=(h=Math.imul(h^str.charCodeAt(i),3432918353))<<13|h>>>19;return function(){return h=Math.imul(h^h>>>16,2246822507),h=Math.imul(h^h>>>13,3266489909),(h^=h>>>16)>>>0}},sfc32=(a,b,c,d)=>function(){var t=(a>>>=0)+(b>>>=0)|0;return a=b^b>>>9,b=(c>>>=0)+(c<<3)|0,c=(c=c<<21|c>>>11)+(t=t+(d=(d>>>=0)+1|0)|0)|0,(t>>>0)/4294967296}}));

//# sourceMappingURL=randomizer.min.js.map