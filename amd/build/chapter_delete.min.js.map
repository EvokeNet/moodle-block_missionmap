{"version":3,"file":"chapter_delete.min.js","sources":["../src/chapter_delete.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n// SPDX-License-Identifier: GPL-3.0-or-later\n\n/* global window */\n\nimport {get_string as getString} from 'core/str';\nimport * as Config from 'core/config';\nimport Ajax from 'core/ajax';\n\nexport const init = () => {\n    const selector = '.delete-chapter-btn';\n    const root = document;\n    root.addEventListener('click', async (e) => {\n        const btn = e.target.closest(selector);\n        if (!btn) {\n            return;\n        }\n        e.preventDefault();\n        const chapterId = btn.getAttribute('data-chapter-id');\n        const courseId = btn.getAttribute('data-course-id');\n        const blockId = btn.getAttribute('data-block-id');\n        const chapterName = btn.getAttribute('data-chapter-name') || '#'+chapterId;\n        const prompt = await getString('confirmdeletechapter', 'block_mission_map', chapterName).catch(() =>\n            'Delete this chapter and all its missions?');\n        if (!window.confirm(prompt)) {\n            return;\n        }\n        Ajax.call([{\n            methodname: 'block_mission_map_delete_chapter',\n            args: {\n                blockid: parseInt(blockId, 10),\n                courseid: parseInt(courseId, 10),\n                chapterid: parseInt(chapterId, 10)\n            }\n        }])[0].then(() => {\n            window.location.reload();\n        }).catch(() => {\n            window.location.reload();\n        });\n    }, true);\n};\n\nexport default {init};\n\n\n"],"names":["init","document","addEventListener","async","btn","e","target","closest","preventDefault","chapterId","getAttribute","courseId","blockId","chapterName","prompt","catch","window","confirm","call","methodname","args","blockid","parseInt","courseid","chapterid","then","location","reload"],"mappings":"gtCASaA,KAAO,KAEHC,SACRC,iBAAiB,SAASC,MAAAA,UACrBC,IAAMC,EAAEC,OAAOC,QAHR,2BAIRH,WAGLC,EAAEG,uBACIC,UAAYL,IAAIM,aAAa,mBAC7BC,SAAWP,IAAIM,aAAa,kBAC5BE,QAAUR,IAAIM,aAAa,iBAC3BG,YAAcT,IAAIM,aAAa,sBAAwB,IAAID,UAC3DK,aAAe,mBAAU,uBAAwB,oBAAqBD,aAAaE,OAAM,IAC3F,8CACCC,OAAOC,QAAQH,uBAGfI,KAAK,CAAC,CACPC,WAAY,mCACZC,KAAM,CACFC,QAASC,SAASV,QAAS,IAC3BW,SAAUD,SAASX,SAAU,IAC7Ba,UAAWF,SAASb,UAAW,QAEnC,GAAGgB,MAAK,KACRT,OAAOU,SAASC,YACjBZ,OAAM,KACLC,OAAOU,SAASC,eAErB,oCAGQ,CAAC3B,KAAAA"}